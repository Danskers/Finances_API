{% extends "base.html" %}
{% block content %}

<div class="kpi-grid">
    <div class="card">
        <div class="kpi-title">TOTAL GLOBAL</div>
        <div class="kpi-value"><p>{{ total_balance | cop }}</p>
</div>
    </div>

    <div class="card">
        <div class="kpi-title">INGRESOS ({{ mes }})</div>
        <div class="kpi-value"><p>{{ total_ingresos | cop }}</p>
</div>
    </div>

    <div class="card">
        <div class="kpi-title">GASTOS ({{ mes }})</div>
        <div class="kpi-value"><p>{{ total_gastos | cop }}</p>
</div>
    </div>

    <div class="card accent">
        <div class="kpi-title">L√çMITE MENSUAL</div>
        <div class="kpi-value"><p>{{ monto_limite | cop }}</p>
</div>
   <small>
    Disponible:
    {% if disponible is none %}
        <span class="chip">No asignado</span>
    {% else %}
        <span class="
            chip
            {% if disponible > 0 %}green{% else %}red{% endif %}
        ">
            {{ disponible | cop }}
        </span>
    {% endif %}
   </small>

    </div>
</div>

<div class="card">
    <h3>Cuentas</h3>

    <ul class="tx-list">
        {% for item in cuentas_info %}
        <li class="tx-row">
            <div class="tx-left">
                <div class="tx-icon">üíº</div>
                <div>
                    <div class="tx-title">{{ item.cuenta.nombre }}</div>
                </div>
            </div>
            <div class="tx-right">
                ${{ '%.2f'|format(item.balance) }}
            </div>
        </li>
        {% endfor %}
    </ul>
</div>

<div class="card">
    <h3>Actualizar l√≠mite mensual</h3>
    <form method="POST" action="/limite">
        <input type="hidden" name="mes" value="{{ mes }}">
        <input type="number" step="0.01" name="monto_limite" placeholder="Nuevo l√≠mite" required>
        <button class="btn btn-primary" type="submit">Guardar</button>
    </form>
</div>

{% endblock %}
